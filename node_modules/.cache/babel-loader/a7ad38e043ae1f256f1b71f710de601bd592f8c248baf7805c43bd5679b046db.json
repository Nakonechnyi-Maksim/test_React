{"ast":null,"code":"import _slicedToArray from\"C:/Users/Maksimka/Desktop/test/cmdb-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import mockData from\"./mockData\";import Pagination from\"./pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EndpointsTable(){var location=useLocation();var history=useNavigate();var searchParams=new URLSearchParams(location.search);var handleChange=function handleChange(){var newSearchParams=new URLSearchParams();newSearchParams.set(\"search_val\",searchValue);newSearchParams.set(\"endpoint_type\",endpointType);newSearchParams.set(\"page\",currentPage.toString());history(\"\".concat(location.pathname,\"?\").concat(newSearchParams.toString()));};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredData=_useState4[0],setFilteredData=_useState4[1];var _useState5=useState(searchParams.get(\"search_val\")||\"\"),_useState6=_slicedToArray(_useState5,2),searchValue=_useState6[0],setSearchValue=_useState6[1];var _useState7=useState(searchParams.get(\"endpoint_type\")||\"\"),_useState8=_slicedToArray(_useState7,2),endpointType=_useState8[0],setEndpointType=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(10),_useState12=_slicedToArray(_useState11,1),itemsPerPage=_useState12[0];useEffect(function(){setData(mockData);var filtered=data.filter(function(item){return(!searchValue||item.name.toLowerCase().includes(searchValue.toLowerCase()))&&(!endpointType||item.type===endpointType);});setFilteredData(filtered);},[data,searchValue,endpointType]);var indexOfLastItem=currentPage*itemsPerPage;var indexOfFirstItem=indexOfLastItem-itemsPerPage;var displayedItems=filteredData.slice(indexOfFirstItem,indexOfLastItem);var handlePageChange=function handlePageChange(page){setCurrentPage(page);handleChange();};var handleSearchChange=function handleSearchChange(e){setSearchValue(e.target.value);handleChange();};var handleEndpointTypeChange=function handleEndpointTypeChange(e){setEndpointType(e.target.value);handleChange();};return/*#__PURE__*/_jsxs(\"div\",{className:\"endpoints\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u044B \\u0438 \\u041F\\u041A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E\",value:searchValue,onChange:handleSearchChange}),/*#__PURE__*/_jsxs(\"select\",{value:endpointType,onChange:handleEndpointTypeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0441\\u0435 \\u0442\\u0438\\u043F\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"server\",children:\"\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pc\",children:\"\\u041F\\u041A\"})]})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0422\\u044D\\u0433\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041C\\u0435\\u0441\\u0442\\u043E\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:displayedItems.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.type}),/*#__PURE__*/_jsx(\"td\",{children:item.tags}),/*#__PURE__*/_jsx(\"td\",{children:item.location})]},item.id);})})]}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:Math.ceil(filteredData.length/itemsPerPage),onPageChange:handlePageChange})]});}export default EndpointsTable;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","mockData","Pagination","jsx","_jsx","jsxs","_jsxs","EndpointsTable","location","history","searchParams","URLSearchParams","search","handleChange","newSearchParams","set","searchValue","endpointType","currentPage","toString","concat","pathname","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","filteredData","setFilteredData","_useState5","get","_useState6","setSearchValue","_useState7","_useState8","setEndpointType","_useState9","_useState10","setCurrentPage","_useState11","_useState12","itemsPerPage","filtered","filter","item","name","toLowerCase","includes","type","indexOfLastItem","indexOfFirstItem","displayedItems","slice","handlePageChange","page","handleSearchChange","e","target","value","handleEndpointTypeChange","className","children","placeholder","onChange","map","tags","id","totalPages","Math","ceil","length","onPageChange"],"sources":["C:/Users/Maksimka/Desktop/test/cmdb-app/src/endPoints.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport mockData from \"./mockData\";\r\nimport Pagination from \"./pagination\";\r\n\r\nfunction EndpointsTable() {\r\n  const location = useLocation();\r\n  const history = useNavigate();\r\n  const searchParams = new URLSearchParams(location.search);\r\n\r\n  const handleChange = () => {\r\n    const newSearchParams = new URLSearchParams();\r\n    newSearchParams.set(\"search_val\", searchValue);\r\n    newSearchParams.set(\"endpoint_type\", endpointType);\r\n    newSearchParams.set(\"page\", currentPage.toString());\r\n    history(`${location.pathname}?${newSearchParams.toString()}`);\r\n  };\r\n\r\n  const [data, setData] = useState([]);\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [searchValue, setSearchValue] = useState(\r\n    searchParams.get(\"search_val\") || \"\"\r\n  );\r\n  const [endpointType, setEndpointType] = useState(\r\n    searchParams.get(\"endpoint_type\") || \"\"\r\n  );\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage] = useState(10);\r\n\r\n  useEffect(() => {\r\n    setData(mockData);\r\n\r\n    const filtered = data.filter((item) => {\r\n      return (\r\n        (!searchValue ||\r\n          item.name.toLowerCase().includes(searchValue.toLowerCase())) &&\r\n        (!endpointType || item.type === endpointType)\r\n      );\r\n    });\r\n\r\n    setFilteredData(filtered);\r\n  }, [data, searchValue, endpointType]);\r\n\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const displayedItems = filteredData.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    handleChange();\r\n  };\r\n  const handleSearchChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n    handleChange();\r\n  };\r\n\r\n  const handleEndpointTypeChange = (e) => {\r\n    setEndpointType(e.target.value);\r\n    handleChange();\r\n  };\r\n\r\n  return (\r\n    <div className=\"endpoints\">\r\n      <h2>Серверы и ПК</h2>\r\n\r\n      <div className=\"filters\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Поиск по названию\"\r\n          value={searchValue}\r\n          onChange={handleSearchChange}\r\n        />\r\n        <select value={endpointType} onChange={handleEndpointTypeChange}>\r\n          <option value=\"\">Все типы</option>\r\n          <option value=\"server\">Сервер</option>\r\n          <option value=\"pc\">ПК</option>\r\n        </select>\r\n      </div>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Название</th>\r\n            <th>Тип</th>\r\n            <th>Тэги</th>\r\n            <th>Местоположение</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {displayedItems.map((item) => (\r\n            <tr key={item.id}>\r\n              <td>{item.name}</td>\r\n              <td>{item.type}</td>\r\n              <td>{item.tags}</td>\r\n              <td>{item.location}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <Pagination\r\n        currentPage={currentPage}\r\n        totalPages={Math.ceil(filteredData.length / itemsPerPage)}\r\n        onPageChange={handlePageChange}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EndpointsTable;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}